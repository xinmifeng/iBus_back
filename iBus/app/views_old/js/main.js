require(["common"],function(e){document.addEventListener("touchstart",function(t){e(t.target).parent("a").addClass("active")},!1),document.addEventListener("touchend",function(t){e(t.target).parent("a").removeClass("active")},!1)}),define("widget/fix",function(){}),define("login/login",["common","service/service","config/url"],function(e,t,n){function i(e){r={message:"",icsonid:"",password:"",vcode:""}}function s(t,r){if(typeof t=="string"&&t.indexOf("http:")>-1)var i=t||"";else var i=location.href||n.baseUrl;e.cookie.add("t_return_url",i,"/",86400,n.mainDomain),arguments.length==1&&typeof t=="boolean"&&(r=t),navigator.userAgent.indexOf("MicroMessenger")>-1?o(t||location.href):(r||window.confirm("您当前未登录，点击确定进入易迅登录页面"))&&p.apply(this,arguments)}function o(e){typeof e=="string"&&e.length>0?e=e:e=location.href;var t=["https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxeb4c414eece9f1c6&redirect_uri=",encodeURIComponent("http://w.yixun.com/t/loginProxy.php?redirectUrl="+encodeURIComponent("http://"+location.hostname.replace("51buy.com","yixun.com")+"/t/my/wxlogin.html?jump="+escape(e)+(location.hash=="#debugcookie"?"#debugcookie":""))),"&response_type=code&scope=snsapi_base&state="+Date.now(),"#wechat_redirect"].join("");location.href=t}function u(e){typeof e=="string"&&e.length>0?e=e:e=location.href;var t=["https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx2f126a482eed269b&redirect_uri=",encodeURIComponent("http://w3sg.w.yixun.com/t/loginProxy.php?fmt=1&redirectUrl="+encodeURIComponent("http://"+location.hostname.replace("51buy.com","yixun.com")+"/t/my/wxlogin.html?jump="+escape(e)+(location.hash=="#debugcookie"?"#debugcookie":""))),"&response_type=code&scope=snsapi_base&state="+Date.now(),"#wechat_redirect"].join("");location.href=t}function a(n){e.xsr(e.makeUrl(t.logout,r),function(e){try{r.message=e.message,r.errno=e.errno,n&&n(e)}catch(t){throw Logger.error("FILENAME:login/login","LINENO:73",t),Logger.send(),t}})}function f(n,i,s,o){r.icsonid=n,r.password=i,r.vcode=s,e.xsr(e.makeUrl(t.login,r),function(e){try{o&&o(e)}catch(t){throw Logger.error("FILENAME:login/login","LINENO:96",t),Logger.send(),t}})}function c(){var t=e.cookie.get("skey"),n=e.cookie.get("uid"),r=e.cookie.get("token");return t!=null&&n!=null&&r!=null&&t!=""&&n!=""&&n!="0"&&r!=""?l=!0:l=!1,e.log(l,"判断登陆结果"),l}function h(t){if(typeof t=="string")var r=t||"";else var r=location.href||n.baseUrl;e.cookie.add("t_return_url",r,"/",3600,n.mainDomain),location.href=e.makeUrl(n.rule.login.icson,{url:encodeURIComponent(r)}).url}function p(t,r){if(typeof t=="string")var i=t||"";else var i=location.href||n.baseUrl;e.cookie.add("t_return_url",i,"/",3600,n.mainDomain),n.rule.login.qq.daid&&n.rule.login.qq.daid!=""&&e.cookie.add("daid",n.rule.login.qq.daid,"/","86400",n.loginDomain),location.href=e.makeUrl(n.rule.login.qq,{s_url:encodeURIComponent(n.rule.login.qqcheck.url+i)}).url}function d(t){if(typeof t=="string")var r=t||"";else var r=location.href||n.baseUrl;e.cookie.add("t_return_url",r,"/",3600,n.mainDomain),location.href=e.makeUrl(n.rule.login.alipay,{url:encodeURIComponent(r)}).url}var t=t.login,r={message:"",icsonid:"",password:"",vcode:""},l=!1;return{hasLogin:l,ifLogin:c,logout:a,icson:s,icsonLogin:h,qq:p,alipay:d,icsonlogin:function(e,t,n,r){f(e,t,n,r)},getBizObj:function(){return r},wxAutoLogin:o,wxAutoLoginFmt:u}}),define("widget/app",["common"],function(){function n(){t={eventid:$.url.getParam("eventid")||0,extra:encodeURIComponent(window.eventextra),likenum:0,errno:0}}function r(e,t,n,r){var i="http://m.51buy.com/t/detail/";try{var s=o().toString();if(s=="1"){n||(n=0),r||(r=0);if(!window.touch||!window.touch.productItem)throw new Exception("can`t call app interface!");$.cookie.get("version")&&$.cookie.get("version").length&&parseFloat($.cookie.get("version"))>=20?window.touch.productItem(parseInt(e),parseInt(t),n+"",r+""):window.touch.productItem(parseInt(e),parseInt(t))}else if(s=="2"){var u=!1;navigator.userAgent.indexOf("Yixun")>-1?u=!0:document.cookie.split(";").forEach(function(e){var t=e.split("="),n=t[0],r=t[1];if(n.trim()=="version"){var i=r.split(".");parseInt(i[0])>=1?parseInt(i[0])==1?parseInt(i[1])>=2?u=!0:u=!1:u=!0:u=!1}});if(!u)throw new Exception("can`t call app interface!");location.href="icson://productItem?pid="+e+"&channelId="+t+"&multiprice="+t+"&pageid="+n+"&ytag="+r}else location.href=i+"?pid="+e+"&channelId="+t;try{arguments.callee.caller.arguments[0].preventDefault()}catch(a){try{arguments.callee.caller.arguments.callee.caller.arguments[0].preventDefault()}catch(f){}}}catch(l){location.href=i+"?pid="+e+"&channelId="+t}}function i(e,t){location.href=function(){var n="";if(navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPad")>-1){if(t&&t.ios_url&&t.ios_url!="")return t.ios_url;n="wconnect-iphone.html?src="+e}else if(navigator.userAgent.indexOf("Android")>-1){if(t&&t.android_url&&t.android_url!="")return t.android_url;n="wconnect-android.html?src="+e}else n="touch-download.html?src="+e;return"http://"+$.url.getHost()+"/"+n}()}function s(){var e=o();if(e==1)try{return window.touch.login(),!0}catch(t){}else if(e==2){var n=tool.getCookie("version");if(n)return location.href="icson://login",!0}location.href="http://"+$.url.getHost()+"/wlogin.html?url="+encodeURIComponent(window.location.href+"")}function o(){if(!(navigator.userAgent.indexOf("Yixun")>-1))return $.url.getParam("app")&&$.url.getParam("app")!=""?$.url.getParam("app"):window.touch?1:$.cookie.get("version")&&(document.userAgent.indexOf("iPhone")>0||document.userAgent.indexOf("iPad")>0||document.userAgent.indexOf("iTouch")>0||document.userAgent.indexOf("iPod")>0)?2:0;var e=navigator.userAgent.split(" ");for(var t=0;t<e.length;t++)if(e[t].indexOf("Yixun")>-1){var n=e[t].split("/"),r=n[1].toLowerCase();return r=="android"?1:r=="iphone"?2:r=="ipad"?3:r=="winphone"?4:0}}var e={productItem:{url:"http://m.51buy.com/index.php?mod=touchact&act=addvotecount&type=product_item&callback=?",get:{eventid:"?",extra:"?"}},download:{url:"http://m.51buy.com/index.php?mod=touchact&act=addvotecount&type=download&callback=?",get:{eventid:"?",extra:"?"}},login:{url:"http://m.51buy.com/index.php?mod=touchact&act=addvotecount&type=login&callback=?",get:{eventid:"?",extra:"?"}}},t={eventid:0,extra:"",likenum:0,errno:0};return{productItem:function(i,s,o,u){n(),$.getJSON($.makeUrl(e.productItem,t).url,function(e){}),setTimeout(r(i,s,o,u),300)},download:function(r,s){n(),$.getJSON($.makeUrl(e.download,t).url,function(e){}),setTimeout(i(r,s),300)},login:function(){n(),$.getJSON($.makeUrl(e.login,t).url,function(e){}),setTimeout(s(),300)},getAppID:o}}),define("footer/footer",["common","login/login","widget/app","config/url","config/url"],function(e,t,n,r,i){function u(t){if(s)return;if(navigator.userAgent.indexOf("iPhone OS 7")>-1&&navigator.userAgent.indexOf("MicroMessenger/5.0.3")>-1)return;var n='<div class="y_nav_bg J_commonNav" ></div><div class="J_nav_bar y_nav_content"><a href="javascript:;" class="btn_slide J_nav_bar_button J_ytag" data-type="2" ytag="11000"></a><div class="search"><div class="inner"><form><input type="search" class="input_txt J_search" placeholder="输入商品名称" /><input class="input_reset" type="reset" value="" /></form></div></div><div class="nav_list"><ul> <li><a href="/t/index.html" class="J_ytag" ytag="11001"><span>首页</span></a></li><li><a href="/t/category/" class="cate J_ytag" ytag="11002"><span>商品分类</span></a></li></ul><ul><li><a href="/t/cart/" class="cart"><span>购物车</span><i class="y_cart_num" id="J_y_cart_num" style="display:none">0</i></a></li><li><a href="/t/my/" class="my J_ytag" ytag="11003"><span>我的易迅</span></a></li></ul></div></div>';e("body").append(n);var r=!1,i="";e(".J_nav_bar_button").click(function(){r?(e(".J_nav_bar").animate({bottom:"-250px"}),e(".y_nav_bg").hide(),e(".y_nav_bg").animate({opacity:0}),e(".y_nav_bg").hide(),r=!1):(e(".J_nav_bar").animate({bottom:"0px"}),e(".y_nav_bg").show(),e(".y_nav_bg").css({opacity:0}),e(".y_nav_bg").animate({opacity:.5},"fast","ease",function(){}),r=!0),cartNum=e.store.get("cart_num"),cartNum=cartNum?parseInt(cartNum):0,cartNum!=0?e("#J_y_cart_num").html(cartNum).show():e("#J_y_cart_num").hide()}),e(".y_nav_bg").bind("touchstart",function(t){t.preventDefault(),e(".J_nav_bar").animate({bottom:"-250px"}),e(".y_nav_bg").hide(),e(".y_nav_bg").animate({opacity:0}),e(".y_nav_bg").hide(),r=!1}),e(".J_search").click(function(){location.href="/t/search/"}),s=!0,t&&t()}var s=!1,o=!1;return{init:function(s){if(o)return;var u='<!--公用footer--><footer class="J_commonFooter"><p><a href="javascript:;" class="J_login J_ytag" data-type="1" ytag="11004">登录</a><a href="http://m.'+r.mainDomain+'/index.php?mod=windex&act=page" class="J_ytag" data-type="1" ytag="11005">标准版</a>'+'<a href="http://www.'+r.mainDomain+'" class="J_ytag" data-type="1" ytag="11006">电脑版</a><a href="javascript:;" class="J_download J_ytag" data-type="1" ytag="11007">下载app</a></p>'+'<p><a href="'+e.makeUrl(i.rule.feedback).url+'" class="J_ytag" data-type="1" ytag="11008">意见反馈</a><a href="tel:4008281878"class="J_ytag" data-type="1" ytag="11009">联系客服</a></p>'+"</footer>	<!--/公用footer-->";e("body").append(u),t.ifLogin()?(e(".J_login").html("我的易迅"),e(".J_login").click(function(){try{location.href=e.makeUrl(i.rule.my.index).url}catch(t){location.href="#"}})):(e(".J_login").html("登录"),e(".J_login").click(function(){t.icson(!0)})),e(".J_download").click(function(){n.download()}),o=!0,s&&s()},nav:u,show:function(){e(".J_nav_bar").show()},hide:function(){e(".J_nav_bar").hide()}}}),define("widget/util",["common"],function(e){return function(){return e.util=this,{getPicUrl:function(e,t,n){var r=e.split("R",2);e=r[0],r=e.split("-",3);var i=r[0],s=r[1],o=r[2];return"http://img"+(parseInt(o)%2?"1":"2")+".icson.com/product/"+t+"/"+i+"/"+s+"/"+e+(n==0?"":"-"+(n<10?"0"+n:n))+".jpg"},getSmallUrl:function(e,t){return this.getPicUrl(e,"small",t)},getSSUrl:function(e,t){return this.getPicUrl(e,"ss",t)},getMMUrl:function(e,t){return this.getPicUrl(e,"mm",t)},getMiddleUrl:function(e,t){return this.getPicUrl(e,"middle",t)},getBigUrl:function(e,t){return this.getPicUrl(e,"mpic",t)},getPic160Url:function(e,t){return this.getPicUrl(e,"pic160",t)},getPic60Url:function(e,t){return this.getPicUrl(e,"pic60",t)},getPic200Url:function(e,t){return this.getPicUrl(e,"pic200",t)},getBigUrl:function(e,t){return this.getPicUrl(e,"mpic",t)},hideTips:function(t){e(".y_loading").animate({opacity:0},"fast","ease-in",function(){e(".y_loading").remove(),t&&t()})},showTips:function(t,n){var r=['<div class="y_loading" id="J_tips_outer">','<div class="mask"></div>','<img class="left">','<div class="inner-content">','<div class="loading-gif"></div>','<div id="J_tips">努力加载中...</div>',"</div>","</div>"].join("");e("body").append(r);var i=e("#J_tips");i.html(t),e("#J_tips_outer").show(),i.show(),n&&n()},price:function(e){return e=parseFloat(e),Math.floor(e)/100},arrayDel:function(e,t){return t<0?e:e.slice(0,t).concat(e.slice(t+1,e.length))},newGuid:function(){var e="";for(var t=1;t<=32;t++){var n=Math.floor(Math.random()*16).toString(16);e+=n;if(t==8||t==12||t==16||t==20)e+="-"}return e}}}()}),define("index/index",["common","login/login","widget/util","service/service","config/url"],function(e,t,n,r,i){function o(t,n){s={errno:0},e.xsr(e.makeUrl(r.init,s),function(e){try{e.errno==0?t&&t(e.data):n&&n(e)}catch(r){throw Logger.error("FILENAME:index/index","LINENO:79",r),Logger.send(),r}})}function u(t,n){e.xsr(e.makeUrl(r.qiang,s),function(e){try{e.errno==0?t&&t(e.data):n&&n(e)}catch(r){throw Logger.error("FILENAME:index/index","LINENO:101",r),Logger.send(),r}})}function a(t,n){e.xsr(e.makeUrl(r.nextqiang,s),function(e){try{e.errno==0?t&&t(e.data):n&&n(e)}catch(r){throw Logger.error("FILENAME:index/index","LINENO:121",r),Logger.send(),r}})}function f(t,n,i){s.ids=t,e.xsr(e.makeUrl(r.getProducts,s),function(e){try{e.errno==0?n&&n(e.data):i&&i(e)}catch(t){throw Logger.error("FILENAME:index/index","LINENO:143",t),Logger.send(),t}})}function l(t,n){s.payType=21,s.type=1,s.targetId=t.mobile||0,s.payMoney=t.money||0,s.operator=t.operator||0,s.area=t.area||"",s.visitkey=parseInt((new Date).getTime()/1e3),e.xsr(e.makeUrl(r.getProducts,s),function(e){try{e.errno==0?success&&success(e.data):fail&&fail(e)}catch(t){throw Logger.error("FILENAME:index/index","LINENO:172",t),Logger.send(),t}})}var r=r.index,s={errno:0};return{init:o,qiang:u,nextqiang:a,getProducts:f,recharge:l,getBizObj:function(){return s}}}),define("detail/detail",["common","login/login","widget/util","service/service"],function(e,t,n,r){function s(t,r){i=e.mix({pid:e.url.getParam("pid"),provinceid:e.url.getParam("provinceid")==""?n.getCookie("t_dispatches"):e.url.getParam("provinceid"),channelId:e.url.getParam("channelId"),siteid:e.cookie.get("whid"),info:[],dispatches:[],detail:[],page:1,type:"",uid:e.cookie.get("uid"),errno:0},t)}function o(t,n,s){s&&(i.pid=s),i.provinceid=e.url.getParam("provinceid")?e.url.getParam("provinceid"):e.cookie.get("t_dispatches"),i.siteid=e.cookie.get("whid");var o="product_info_"+i.provinceid+"_"+i.pid;e.getJSON(e.makeUrl(r.productInfo,i).url,function(e){e.errno==0?(i.info=e.data,e.data.expireTime=u(),t&&t(e.data)):(i.errno=e.errno,n&&n(e),Logger.warn("FILENAME:detail/detail","LINENO:80","获取商品信息失败"+JSON.stringify(r.productInfo)+"["+e.errno+"]"+(e.data||"")))})}function u(){return Date.parse(new Date)/1e3}function a(t){var n="dispatches",s;e.store.isPrivateBrowse()||(s=e.store.get(n)?JSON.parse(e.store.get(n)):null),s?(i.dispatches=s,t&&t()):e.getJSON(e.makeUrl(r.dispatches,i).url,function(r){r.errno==0&&(i.dispatches=r.data.dispatches,i.dispatches.sort(function(e,t){return e.name=="上海"||e.name=="广东"||e.name=="北京"?!1:!0}),e.store.set(n,JSON.stringify(r.data.dispatches))),t&&t()})}function f(t){e.getJSON(e.makeUrl(r.productModel,i).url,function(e){e.errno==0?i.model=e.data:alert(e.errno),t&&t()})}function l(t,n){e.xsr(e.makeUrl(r.productDetail,i),function(e){try{e.errno==0?t&&t(e):n&&n(e)}catch(r){throw Logger.error("FILENAME:detail/detail","LINENO:145",r),Logger.send(),r}})}function c(e){e&&e()}function h(t,n,s,o){i.type=s,i.page=n,e.xsr(e.makeUrl(r.productComment,i),function(e){try{i.comment=e,o&&o()}catch(t){throw Logger.error("FILENAME:detail/detail","LINENO:165",t),Logger.send(),t}})}function p(t,n){e.xsr(e.makeUrl(r.addFav,i),function(e){try{e.errno==0?t&&t(e):n&&n(e)}catch(r){throw Logger.error("FILENAME:detail/detail","LINENO:181",r),Logger.send(),r}})}function d(t,n){e.xsr(e.makeUrl(r.removeFav,i),function(e){try{e.errno==0?t&&t(e):n&&n(e)}catch(r){throw Logger.error("FILENAME:detail/detail","LINENO:197",r),Logger.send(),r}})}function v(t,n){e.xsr(e.makeUrl(r.addMyNotify,i),function(e){try{e.errno==0?t&&t(e):n&&n(e)}catch(r){throw Logger.error("FILENAME:detail/detail","LINENO:213",r),Logger.send(),r}})}var r=r.detail,i={pid:e.url.getParam("pid"),provinceid:e.url.getParam("provinceid")==""?n.getCookie("t_dispatches"):e.url.getParam("provinceid"),channelId:e.url.getParam("channelId"),siteid:e.cookie.get("whid"),info:[],dispatches:[],detail:[],type:"",uid:e.cookie.get("uid"),errno:0};return{init:s,getProductInfo:o,getDispatches:function(e){a(e)},getProductDetail:l,getProductModel:function(e){f(e)},getProductComment:function(e){c(e)},getProductCommentByPage:function(e,t,n,r){h(e,t,n,r)},addFav:p,removeFav:d,addMyNotify:v,getBizObj:function(){return i}}}),define("tplFn/tplFn",[],function(){var e={jtpl:function(){var t={};return this.tmpl=function(r,i){var s=r.length&&r in t?t[r]:new Function("obj","var _p_=[],print=function(){_p_.push.apply(_p_,arguments);};with(obj){$T=tplFn=this;_p_.push('"+r.split(/({%.+%})/g).map(function(e){return e.indexOf("{%")==-1?e.replace(/"([^"']*('[^"']+')+)+[^"']*"/g,function(e){return e.replace(/\'/g,'\\"')}):e}).join("").replace(/[\r\t\n]/g," ").split("{%").join("	").replace(/((^|%})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%}/g,"',$1,'").split("	").join("');").split("%}").join("_p_.push('").split("\r").join("\\'")+"');}return _p_.join('');");return i?s.call(e,i):s},this.tmpl}(),priceFormat:function(e){return e/100==parseInt(e/100)?e/100:e/10==parseInt(e/10)?(e/100).toFixed(1):(e/100).toFixed(2)},toFixed:function(e,t){var n=e.toFixed(t).toString(),r=n.substr(n.length-t),i=n.substr(0,n.length-t),s=r.split("");while(s[s.length-1]=="0")s.splice(s.length-1);return i+s.join("")},step:function(t){return e.thread==1?$ENV.step[t]%2==0?$ENV.step[t]+=1:$ENV.step[t]+=2:$ENV.step[t]%2==1?$ENV.step[t]+=1:$ENV.step[t]+=2,$ENV.step[t]},getPicUrl:function(e,t,n){var r=e.split("R",2);e=r[0],r=e.split("-",3),n=n||0;var i=r[0],s=r[1],o=r[2];return"http://img"+(parseInt(o)%2?"1":"2")+".icson.com/product/"+t+"/"+i+"/"+s+"/"+e+(n==0?"":"-"+(n<10?"0"+n:n))+".jpg"},getSmallUrl:function(e,t){return this.getPicUrl(e,"small",t)},getSSUrl:function(e,t){return this.getPicUrl(e,"ss",t)},getMMUrl:function(e,t){return this.getPicUrl(e,"mm",t)},getMiddleUrl:function(e,t){return this.getPicUrl(e,"middle",t)},getBigUrl:function(e,t){return this.getPicUrl(e,"mpic",t)},getPic160Url:function(e,t){return this.getPicUrl(e,"pic160",t)},getPic60Url:function(e,t){return this.getPicUrl(e,"pic60",t)},getPic200Url:function(e,t){return this.getPicUrl(e,"pic200",t)},getBigUrl:function(e,t){return this.getPicUrl(e,"mpic",t)},size:function(e){if(e.length)return e.length;if(typeof e=="object"){var t=0;for(var n in e)t++;return t}return 1},orEmpty:function(e){return e==null?"":e}};return e}),define("widget/tplRender/remoteTpl",[],function(){return{matchHTML:function(e){var t=e.match(/<body(.*(\r\n|\n))+.*<\/body>/mg)[0].replace(/<body(^>)*>/mi,"").replace(/<\/body>/i,"");return t=t.replace(/<script(.*[^.])*<\/script>/mgi,""),t}}}),define("widget/tplrender",["common","tplFn/tplFn","config/url","widget/tplRender/remoteTpl"],function(e,t,n,r){function h(t,n,i,s){try{if(!s){var l="EXCUTE_SEQUENCE_"+f++;s={mission:l,el:t,data:n,callback:i,total:0},__tplrender_mission__[l]=s}if(typeof t!="string"&&t.length&&!t.nodeName)for(var d=0;d<t.length;d++)h(t[d],n,i,s);else if(!t.nodeName&&t.wrapperId&&t.url&&!t.tpl)__tplrender_tpl_store__[t.url]?(t.tpl=__tplrender_tpl_store__[t.url],h(t,n,i,s)):e.get(t.url,function(o){e.log("远程tpl模板",o),t.tpl=r.matchHTML(o),__tplrender_tpl_store__[t.url]=t.tpl,h(t,n,i,s)});else{var v=o+window._cmd_no_tplrender_++;__tplrender_ticket__[v]={el:t},s.total++,e.log("total",s.total);var g={cmd:"tpl",tpl:p(t),id:v,data:m(n),mission:s.mission};if(a&&u)for(var d=0;d<workerPool.length;d++){var y=workerPool[d];if(y.status==0){y.postMessage(g),y.status=1;break}d==workerPool.length-1&&__tplrender_jobArray__.push(g)}else __tplrender_jobArray__.push(g),c.status==0&&(c.status=1,(window.requestAnimationFrame||window.webkitRequestAnimationFrame||setTimeout)(function(){c.job(__tplrender_jobArray__.shift())},0))}}catch(b){throw Logger.error("FILENAME:widget/tplrender","LINENO:191","模板报错"+b.stack),b}}function p(e){if(typeof e=="string")return e;if(!e||!e.tagName)return e.tpl?e.tpl:"";switch(e.tagName.toLowerCase()){case"script":return e.text;case"textarea":return e.value;default:return""}}function d(t,n,r,i){e.log("finish tpl replace");var s=__tplrender_ticket__[t].el,o,u,a,f,l;if(s.nodeName){u=s.getAttribute("data-remove"),a=s.getAttribute("data-wrapper-id"),l=s.getAttribute("data-wrapper-cls"),h=s.getAttribute("data-wrapper-tag")||"div",o=s.id;if(u&&u.toLowerCase()=="false")if(a&&a.length>0){e("#"+a).remove();if(n.length&&!/^\s+$/.test(n)){var c=document.createElement(h);c.id=a,c.innerHTML=n,l&&(c.className=l),e(s).before(c)}}else n.length&&!/^\s+$/.test(n)&&(e(s).attr("data-insert-position")=="after"?e.insertHTML(s,n,"after"):e.insertHTML(s,n,"before"));else n.length&&!/^\s+$/.test(n)&&e.replaceHTML(s,n)}else if(s.wrapperId&&s.wrapperId.length){var a=s.wrapperId,l=s.wrapperCls,h=s.wrapperTag||"div";if(a&&a.length>0){e("#"+a).remove();var c=document.createElement(h);c.id=a,c.innerHTML=n,l&&(c.className=l),e("body>footer").length?e("body>footer").before(c):document.body.appendChild(c)}}delete __tplrender_ticket__[t];var p=__tplrender_mission__[r];p.total--,f={left:p.total,id:o,result:n,wrapperId:a,wrapperCls:l},e.log("missionId",r),e.log("mission total",p.total),e.log("__tplrender_ticket__",__tplrender_ticket__),e.log("re",f);try{p.callback&&p.callback(f)}catch(d){throw Logger.error("FILENAME:widget/tplrender","LINENO:306",d),Logger.send(),d}finally{if(p.total==0){delete __tplrender_mission__[r];if(i)for(var v in i)$ENV.step=$ENV.step||{},$ENV.step[v]=Math.max($ENV.step[v]||0,i[v])}}e.log("mission.callback",p.callback)}function v(t,n){function i(){var r=t.wrapperTag||"div";if(t.wrapperId){document.getElementById(t.wrapperId)&&e("#"+t.wrapperId).remove();var i=document.createElement(r);i.id=t.wrapperId,t.wrapperCls&&(i.className=t.wrapperCls),i.innerHTML=t.tpl,e("body>footer").length?e("body>footer").before(i):document.body.appendChild(i)}n&&n()}__tplrender_tpl_store__[t.url]?(t.tpl=__tplrender_tpl_store__[t.url],i()):e.get(t.url,function(n){e.log("远程tpl模板",n),t.tpl=r.matchHTML(n),__tplrender_tpl_store__[t.url]=t.tpl,i()})}function m(t,n){return e.mix({_$ENV:$ENV},t)}this.$T=this.tplFn=t,t.makeUrl=e.makeUrl;var i=this,s,o="TPLRENDER_CMD_",u=!0,a=!0;__tplrender_ticket__={},__tplrender_tpl_store__={},__tplrender_mission__={},__tplrender_jobArray__=[];var f=0;window.$ENV=e.mix({userAgent:navigator.userAgent},n),window.workerPool=[];var l=2,c;return function(){window._cmd_no_tplrender_=0;if(!window._tplrenderWorker){var t="";t="http://"+e.url.getHost()+"/t";try{for(var n=0;n<l;n++)s=new Worker(t+"/worker.js?v="+(workerVersion||"")),s.onerror=function(e){Logger.error("FILENAME:widget/tplrender","LINENO:381",e.stack||e.message,"worker错误信息"),Logger.error("FILENAME:widget/tplrender","LINENO:382",e.lineno,"worker错误行号"),Logger.error("FILENAME:widget/tplrender","LINENO:383",e.filename,"worker错误文件"),Logger.send()},s&&(window._tplrenderWorker!=1&&document.body.addEventListener("beforeunload",function(){for(var e=0;e<workerPool.length;e++)workerPool[e].terminate()}),window._tplrenderWorker=!0,s.onmessage=function(t){var n=t.data;if("result"in n){this.status=0;try{__tplrender_jobArray__.length&&(this.postMessage(__tplrender_jobArray__.shift()),this.status=1),e.log("on message data",n);if(n.id&&__tplrender_ticket__[n.id]){var r=n.result;d(n.id,r,n.mission,n.step)}e.log("data.id+time",n.id+" "+ +(new Date))}catch(i){throw Logger.error("FILENAME:widget/tplrender","LINENO:418",i),Logger.send(),i}}},s.status=0),workerPool.push(s)}catch(r){"不支持双核处理模式",a=!1}}return c={job:function(t){try{__tplrender_jobArray__.length?(window.requestAnimationFrame||window.webkitRequestAnimationFrame||setTimeout)(function(){c.job(__tplrender_jobArray__.shift())},0):c.status=0,function(){e.log("localMainThreadID",t.id);var n=e.tpl.render(t.tpl,t.data);n.indexOf("{%")>-1&&t.data!=null&&(n=this.tplFn.jtpl(n,t.data)),d(t.id,n,t.mission)}.call(i)}catch(n){throw Logger.error("FILENAME:widget/tplrender","LINENO:452",n),Logger.send(),n}},status:0},{tpl:h,getRemoteTpl:v,disableMutiThread:function(){u=!1},enableMutiThread:function(){u=!0},stepVariable:function(){return $ENV.step=$ENV.step||{},$ENV.step}}}()}),define("widget/select",["common"],function(){function e(e){return!e.nodeName&&e.selector?e[0]:e}return{clear:function(t){if(t==undefined)return;t=e(t);try{t.options.length=0}catch(n){for(var r=0,i=t.options;r<i.length;r++)i[r].remove()}},fill:function(t,n){if(t==undefined)return;t=e(t),$.isNull(n)||(this.clear(t),$.each(n,function(e,n){var r=new Option(n.name,n.value);n.selected==1&&(r.selected=!0),t.options.add(r)}))},removeByName:function(t,n){if(t==undefined)return;t=e(t);for(var r=0,i=t.options;r<i.length;r++)i[r].text==n&&i[r].remove()},removeByValue:function(t,n){if(t==undefined)return;t=e(t);for(var r=0,i=t.options;r<i.length;r++)i[r].value==n&&i[r].remove()},prepend:function(t,n,r){if(t==undefined)return;t=e(t);if(!$.isNull(n)){var i=[];if(n.length)$.reverseEach(n,function(e,t){var n=new Option(t.name,t.value);t.selected&&(n.selected=!0),i.push(n)});else{var s=new Option(n.name,n.value);n.selected&&(s.selected=!0),i.push(s)}$.each(i,function(e,n){t.options.add(n,r>0?r-1:0)})}},append:function(t,n,r){if(t==undefined)return;t=e(t);if(!$.isNull(n)){var i=[];if(n.length)$.each(n,function(e,t){var n=new Option(t.name,t.value);t.selected&&(n.selected=!0),i.push(n)});else{var s=new Option(n.name,n.value);n.selected&&(s.selected=!0),i.push(s)}$.each(i,function(e,n){r>=0?t.options.add(n,r):t.options.add(n)})}},indexOfByName:function(t,n){t=e(t);var r=-1;return $.each(t.options,function(e,t){if(t.text==n)return r=e,!1}),r},indexOfByValue:function(t,n){t=e(t);var r=-1;return $.each(t.options,function(e,t){if(t.value==n)return r=e,!1}),r},getSelectedText:function(e){return e.options[e.selectedIndex].text}}}),define("widget/message",["common"],function(e){return function(){function t(t,r){if(t.btn){e.each(t.btn,function(e,n){n.style||(t.btn[e].style="btn_normal")}),t.btn&&t.btn.length==1&&(t.btn[0].style+=" btn_normal_big");var i=['<div class="y_dt y_dt_txtone J_message_tips">','<div class="inner">',"<dl>","<dt><pre>{{msg}}</pre></dt>",'<dd>{{#btn}}<a href="javascript:;" class="{{style}}" id="{{id}}">{{name}}</a>{{/btn}}</dd>',"</dl>",'{{^btn}}<div class="txt"><pre>{{msg}}</pre></div>{{/btn}}',"</div>","</div>"].join("")}else{t.timeout||(t.timeout=5e3);var i=['<div class="y_dt y_dt_txtone J_message_tips">','<div class="inner">','<div class="txt"><pre>{{msg}}</pre></div>',"</div>","</div>"].join("")}var s=e.tpl.render(i,t);e(".J_message_tips").css({opacity:0}),e("body").append(s),e(".J_message_tips").animate({opacity:1},"fast"),t.btn||setTimeout(function(){try{n()}catch(e){throw Logger.error("FILENAME:widget/message","LINENO:78",e),e}},t.timeout),r&&r()}function n(t){t||(t=".J_message_tips"),e(t).remove()}var r={success:function(r,i,s){if(!e(".J_message_tips").length){n(),i=i||{};var o={};o.msg=r||"";var u=parseInt(r.length/10);u<1?o.timeout=1500:o.timeout=1500*u,t(o,s)}},error:function(r,i,s){if(!e(".J_message_tips").length){n(),i=i||{};var o={};o.msg=r||"出错啰，请重试！",o.btn=[{name:"我知道了"}],t(o,function(){e(".J_message_tips").click(function(){n()}),s&&s()})}},confirm:function(r,i,s){if(!e(".J_message_tips").length){n(),i=i||{};var o={};o.msg=r||"",o.btn=[{style:"btn_normal",id:"J_tips_YES",name:"是"},{style:"btn_strong",id:"J_tips_NO",name:"否"}],t(o,function(){e(".J_message_tips").click(function(){n()}),s&&s()})}},tips:t,hideTips:n};return e.message=r,r}()}),define("widget/orientation",["common"],function(e){function r(e){typeof e=="function"&&t.push(e)}function i(e){var n=[];for(var r=0;r<t;r++)t[r]!=e&&n.push(t[r]);t=n}var t=[],n=window.orientation?"landscape":"portrait",s,o=e(window).width();return window.addEventListener("orientationchange",function(){try{window.orientation===0?(clearInterval(s),s=setInterval(function(){try{if(o!=e(window).width()){clearInterval(s),o=e(window).width(),n="landscape";for(var r=0;r<t.length;r++)try{t[r]()}catch(i){Logger.error("FILENAME:widget/orientation","LINENO:39",i)}}}catch(i){throw Logger.error("FILENAME:widget/orientation","LINENO:44",i),i}},100)):(clearInterval(s),s=setInterval(function(){try{if(o!=e(window).width()){clearInterval(s),o=e(window).width(),n="portrait";for(var i=0;i<t.length;i++)t[i]()}}catch(u){throw Logger.error("FILENAME:widget/orientation","LINENO:61",u),r}},100))}catch(r){throw Logger.error("FILENAME:widget/orientation","LINENO:67",r),r}},!1),{watch:r,cancel:i}}),define("widget/math",[],function(){return{padZero:function(e,t){var n=e.toString();do{var r=n.indexOf(".")>-1?n.indexOf("."):n.length;r<t&&(n="0"+n)}while(r<t);return n},rand:function(e,t){t=t||e||100,e=e||0;var n=Math.round(Math.random()*t);if(e!=0&&t!=e){e>t&&(t=e),e<0&&(n=this.positiveOrNegative()*n);while(n<e)n=this.positiveOrNegative()*Math.round(Math.random()*t)}return n},oneOrZero:function(){return Math.round(Math.random())},positiveOrNegative:function(){var e=this.oneOrZero();return e?1:-1},randUnit:function(e){return e=e||3,this.padZero(Math.round(Math.random()*Math.pow(10,e)),e)},randUnitNotZeroBefore:function(e){e=e||3;var t=Math.round(Math.random()*Math.pow(10,e));while(t<Math.pow(10,e-1))t=Math.round(Math.random()*Math.pow(10,e));return t},convert:function(e,t,n){var r=new String(e);return r=parseInt(r,parseInt(t)),r.toString(parseInt(n))},splitNumberWithComma:function(e,t,n){t==null&&n==null?(t=",",n=3):n==null&&(typeof t!="number"?n=3:(t=",",n=parseInt(t)));var r=e.toString().split(""),i=[],s=[];for(var o=0;o<r.length;o++)(r.length-o-1)%n>0?s.push(r[o]):(s.push(r[o]),i.push(s.join("")),s=[]);return i.join(t)}}}),define("widget/fx",["common","widget/math"],function(e,t){function f(){return(window.requestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame||setInterval).apply(undefined,arguments)}function l(){return(window.cancelAnimationFrame||window.msCancelAnimationFrame||window.webkitCancelAnimationFrame||clearInterval).apply(undefined,arguments)}function c(o){function b(n){n?o.hold=Math.abs(Date.now()-o._startTime):o.hold+=o.timeSeg;for(var r=0;r<o.effects.length;r++){var i=o.effects[r],s=e(i.el);i.fx=typeof i.fx=="function"?i.fx:a[i.fx]||o.fx;var u="",c,v,m={};for(var w in i.to){var E,S=i.to[w];if(i.from!=null&&w in i.from)E=i.from[w],c=h(E);else{E=d(s,w),S=i.to[w];if(E!=null&&E!=""&&E!="none"&&E.indexOf("rgb")=="0"&&S.indexOf("#")==0){var x="#";e.each(E.match(/\d+/g),function(e,n){if(e==3)return!1;x+=t.padZero(t.convert(n,10,16),(S.length-1)/3)}),E=x}c=h(E)}v=h(S);if(c==null||v==null||c.length!=v.length)return;for(var T=0;T<v.length;T++){T>0&&(u+=" ");var N=v[T],C;if(N.value.indexOf("#")==0){c[T].value.length==4&&(c[T].value=c[T].value.substring(0,1)+c[T].value.substring(1,2)+c[T].value.substring(1,2)+c[T].value.substring(1,2)+c[T].value.substring(2,3)+c[T].value.substring(2,3)+c[T].value.substring(3,4)+c[T].value.substring(3,4)),v[T].value.length==4&&(v[T].value=v[T].value.substring(0,1)+v[T].value.substring(1,2)+v[T].value.substring(1,2)+v[T].value.substring(1,2)+v[T].value.substring(2,3)+v[T].value.substring(2,3)+v[T].value.substring(3,4)+v[T].value.substring(3,4));var k={r:0,g:0,b:0};c!=null&&(k={r:parseFloat(t.convert(c[T].value.substring(1,3),16,10)),g:parseFloat(t.convert(c[T].value.substring(3,5),16,10)),b:parseFloat(t.convert(c[T].value.substring(5,7),16,10))});var L={r:parseFloat(t.convert(v[T].value.substring(1,3),16,10)),g:parseFloat(t.convert(v[T].value.substring(3,5),16,10)),b:parseFloat(t.convert(v[T].value.substring(5,7),16,10))},A={r:i.fx(o.hold,k.r,L.r-k.r,o.duration),g:i.fx(o.hold,k.g,L.g-k.g,o.duration),b:i.fx(o.hold,k.b,L.b-k.b,o.duration)};C="#"+t.padZero(t.convert(A.r,10,16),2)+t.padZero(t.convert(A.g,10,16),2)+t.padZero(t.convert(A.b,10,16),2)}else{var O=o.hold,M=c==null?0:parseFloat(c[T].value),_=c==null?parseFloat(v[T].value):parseFloat(v[T].value)-parseFloat(c[T].value),D=o.duration;C=i.fx(O,M,_,D),i.reverse&&g%2==1&&(C=-C)}u+=N.prefix+C+N.unit+N.postfix}if(u.indexOf("rgba")>-1){var P=u,H=P.match(/rgba?\s*\((\d+\.?\d*\s*,?)+\s*\)/ig);H&&H.length&&e.each(H,function(t,n){var r=n;e.each(n.match(/(\d+\.?\d*)/g),function(e,t,n){r=r.replace(t,parseFloat(t)>1?Math.round(t):t)}),P=P.replace(n,r)}),u=P}m[w]=u}o.hold>=o.duration?p(s,i.to):p(s,m)}g++,o.hold>=o.duration?(l(y),o.then&&typeof o.then=="function"&&o.then()):n&&(y=f(b,o.timeSeg))}i++,o.timer&&(typeof o.timer=="number"?clearInterval(o.timer):typeof o.timer=="string"&&o.timer in u&&clearInterval(u[o.timer])),o.hold=o.hold||0,o.duration=o.duration||r,o.timeSeg=o.timeSeg||n,o.fx=typeof o.fx=="function"?o.fx:a.swing;for(var c=0;c<o.effects.length;c++){var v=o.effects[c],m=e(v.el);v.from&&p(m,v.from)}var g=0;o._startTime=Date.now();var y=f(b,o.timeSeg);typeof o.timer=="string"&&o.timer in u?u[o.timer]=y:u[s+i]=y}function h(e){if(typeof e!="undefined"){e=e.toString();var t=e.match(/([a-z\(,\s]*)([+\-]?\d+\.?\d*|#[\da-f]{6}|#[\da-f]{3})([a-z|%]*)([a-z\)]*)/ig);if(t!=null){var n=[];for(var r=0;r<t.length;r++){var i=t[r].match(/([a-z\(,\s]*)([+\-]?\d+\.?\d*|#[\da-f]{6}|#[\da-f]{3})([a-z|%]*)([a-z\)]*)/i),s={style:i[0],prefix:i[1],value:i[2],unit:i[3],postfix:i[4]};n.push(s)}return n}}return null}function p(t,n){var r=e.mix(n);o.forEach(function(e,i,s){e in n&&(t[0][e]=r[e],delete r[e])}),t.css(r)}function d(e,t){var n="",r=!1;return o.forEach(function(i,s,o){i==t&&(n=e[0][i],r=!0)}),r||(n=e.css(t)),n}var n=17,r=1e3,i=1,s="MOTION_TIMER_",o=["scrollTop","scrollLeft"],u={},a={swing:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInQuad:function(e,t,n,r){return n*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){return e==0?t:n*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){return e==r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t},easeInOutExpo:function(e,t,n,r){return e==0?t:e==r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var i=1.70158,s=0,o=n;if(e==0)return t;if((e/=r)==1)return t+n;s||(s=r*.3);if(o<Math.abs(n)){o=n;var i=s/4}else var i=s/(2*Math.PI)*Math.asin(n/o);return-(o*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*2*Math.PI/s))+t},easeOutElastic:function(e,t,n,r){var i=1.70158,s=0,o=n;if(e==0)return t;if((e/=r)==1)return t+n;s||(s=r*.3);if(o<Math.abs(n)){o=n;var i=s/4}else var i=s/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*e)*Math.sin((e*r-i)*2*Math.PI/s)+n+t},easeInOutElastic:function(e,t,n,r){var i=1.70158,s=0,o=n;if(e==0)return t;if((e/=r/2)==2)return t+n;s||(s=r*.3*1.5);if(o<Math.abs(n)){o=n;var i=s/4}else var i=s/(2*Math.PI)*Math.asin(n/o);return e<1?-0.5*o*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*2*Math.PI/s)+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*r-i)*2*Math.PI/s)*.5+n+t},easeInBack:function(e,t,n,r,i){return i==undefined&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return i==undefined&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){return i==undefined&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},easeInBounce:function(e,t,n,r){return n-a.easeOutBounce(r-e,0,n,r)+t},easeOutBounce:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,r){return e<r/2?a.easeInBounce(e*2,0,n,r)*.5+t:a.easeOutBounce(e*2-r,0,n,r)*.5+n*.5+t}};return e.merge(a,{"ease-out":a.easeOutQuad,"ease-in":a.easeInQuad}),{glide:function(t){var n=e(t.el),r=e("<div></div>");n.wrap(r),r.css({height:"1px",overflow:"hidden"}),r.animate({height:n.height()},"fast","ease",function(){n.unwrap(),t.then&&t.then()})},upglide:function(t){var n=e(t.el),r=e("<div></div>");n.wrap(r),r.css({height:n.height(),overflow:"hidden"}),r.animate({height:1},"fast","ease",function(){n.unwrap(),t.then&&t.then()})},slideToRight:function(t){var n=e(t.el);n.css({"-webkit-transform":"translateX(0)"}),n.animate({"-webkit-transform":"translateX("+n.width()+"px"+")"},"fast","ease",function(){t.then&&t.then()})},slideFromRight:function(t){var n=e(t.el);n.css({"-webkit-transform":"translateX("+n.width()+"px"+")"}),n.animate({"-webkit-transform":"translateX(0)"},"fast","ease",function(){t.then&&t.then()})},motion:c,Fx:a}}),define("widget/touch",["common"],function(){(function(e){function a(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function f(){s=null,t.last&&(t.el.trigger("longTap"),t={})}function l(){s&&clearTimeout(s),s=null}function c(){n&&clearTimeout(n),r&&clearTimeout(r),i&&clearTimeout(i),s&&clearTimeout(s),n=r=i=s=null,t={}}function h(e){return e.pointerType==e.MSPOINTER_TYPE_TOUCH&&e.isPrimary}var t={},n,r,i,s,o=750,u;e(document).ready(function(){var p,d,v=0,m=0,g;"MSGesture"in window&&(u=new MSGesture,u.target=document.body),e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;n&&(t.el.trigger("swipe"),t.el.trigger("swipe"+n))}).on("touchstart",function(r){if(r.type=="MSPointerDown"&&!h(r))return;g=r.type=="MSPointerDown"?r:r.touches[0],p=Date.now(),d=p-(t.last||p),t.el=e("tagName"in g.target?g.target:g.target.parentNode),n&&clearTimeout(n),t.x1=g.pageX,t.y1=g.pageY,d>0&&d<=250&&(t.isDoubleTap=!0),t.last=p,s=setTimeout(f,o),u&&r.type=="MSPointerDown"&&u.addPointer(r.pointerId)}).on("touchmove",function(e){if(e.type=="MSPointerMove"&&!h(e))return;g=e.type=="MSPointerMove"?e:e.touches[0],l(),t.x2=g.pageX,t.y2=g.pageY,v+=Math.abs(t.x1-t.x2),m+=Math.abs(t.y1-t.y2)}),e(document).on(window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(s){if(s.type=="MSPointerUp"&&!h(s))return;l(),t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30?i=setTimeout(function(){t.el.trigger("swipe"),t.el.trigger("swipe"+a(t.x1,t.x2,t.y1,t.y2)),t={}},0):"last"in t&&(v<30&&m<30?r=setTimeout(function(){var r=e.Event("tap");r.cancelTouch=c,t.el.trigger(r),t.isDoubleTap?(t.el.trigger("doubleTap"),t={}):n=setTimeout(function(){n=null,t.el.trigger("singleTap"),t={}},250)},0):t={}),v=m=0}),e(document).on("touchcancel",c),e(window).on("scroll",c)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})})(Zepto)}),define("widget/banner",["common","widget/fx"],function(e,t){function r(t){var r=this;r.config=e.mix(n,t),r.container=r.config.container,r.itemContainer=r.config.itemContainer,r.config.itemSelector?r.items=e(r.config.itemSelector,r.itemContainer):r.items=r.itemContainer.children(),r.currentItem=r.items.eq(r.config.index),r.prevItem=null,r.nextItem=null,r.length=r.items.length,r.index=r.config.index,r.indexContainer=r.config.indexContainer,r.stepDistance=r.config.stepDistance,r.initCurrentItemStyle(),r.bindEvent(),r.config.autoScroll&&r.autoScroll(r.config.autoScroll)}var n={container:document.body,itemContainer:undefined,indexContainer:undefined,step:1,itemSelector:undefined,indexSelector:undefined,itemAnimSelector:"img",itemAnimStyle:undefined,currentItemCls:undefined,currentItemAnimStyle:"",prevItemCls:undefined,nextItemCls:undefined,currentIndexCls:undefined,center:!1,left:0,leftFix:0,index:0,length:0,fxFn:"ease-out",fxDuration:200,autoScroll:undefined,circle:!0};return r.prototype={initCurrentItemStyle:function(){var t=this;t.config.currentItemCls&&t.currentItem.addClass(t.config.currentItemCls),t.items.each(function(n,r){n!=t.index&&e(r).hide()}),t.switchIndex()},switchIndex:function(){var t=this;if(t.indexContainer&&t.indexContainer.length){var n;t.config.indexSelector?n=e(t.config.indexSelector,t.indexContainer):n=t.indexContainer.children(),n.each(function(n,r){e(r).hasClass(t.config.currentIndexCls)&&e(r).removeClass(t.config.currentIndexCls)}),n.eq(t.index).addClass(t.config.currentIndexCls)}},bindEvent:function(){var t=this;t.scrollLock=!1,t.container.bind("touchstart",function(e){t.scrollLock=!1,t.pauseAutoScroll()}),t.container.bind("touchmove",function(n){n.stopPropagation(),n.preventDefault(),t.pauseAutoScroll();var r=t._getEvPos(n);t.startPos==null?(t.startPos=r,t.prevPos=r,t.nowPos=r):(t.prevPos=t.nowPos,t.nowPos=r),t.prevPos&&t.nowPos&&Math.abs(t.prevPos.x-t.nowPos.x)>10&&n.preventDefault(),t.config.autoScroll&&(clearTimeout(t.timeout),t.timeout=setTimeout(function(){try{t.autoScroll(t.config.autoScroll)}catch(e){throw Logger.error("FILENAME:widget/banner","LINENO:142",e),Logger.send(),e}},1e3)),t.startPos&&t.nowPos&&Math.abs(t.startPos.x-t.nowPos.x)>10&&(t.scrollLock=!0),t.scrollLock||(document.body.scrollTop=e(window).scrollTop()+t.startPos.y-t.nowPos.y)}),t.container.bind("touchend",function(n){t.scrollLock=!1;if(t.startPos==null||t.nowPos==null)return;var r=t.startPos.x-t.nowPos.x;r<0?t.scroll(!1):r>0&&t.scroll(!0),t.startPos=null,t.prevPos=null,t.nowPos=null;if(t.indexContainer&&t.indexContainer.length){var i;t.config.indexSelector?i=e(t.config.indexSelector,t.indexContainer):i=t.indexContainer.children(),i.each(function(n,r){e(r).hasClass(t.config.currentIndexCls)&&e(r).removeClass(t.config.currentIndexCls)}),i.eq(t.index).addClass(t.config.currentIndexCls)}t.config.autoScroll&&(clearTimeout(t.timeout),t.timeout=setTimeout(function(){try{t.autoScroll(t.config.autoScroll)}catch(e){throw Logger.error("FILENAME:widget/banner","LINENO:192",e),Logger.send(),e}},1e3))})},_getEvPos:function(e){var t=this;return e.type.indexOf("touch")==0&&e.targetTouches&&e.targetTouches.length?{x:e.targetTouches?e.targetTouches[0].pageX:e.pageX,y:e.targetTouches?e.targetTouches[0].pageY:e.pageY}:{x:e.pageX,y:e.pageY}},move:function(e){var n=this;n.prevItem.show(),n.currentItem.show(),e?t.motion({effects:[{el:n.prevItem,from:{"-webkit-transform":"translateX(0%)"},to:{"-webkit-transform":"translateX(-100%)"}},{el:n.currentItem,from:{"-webkit-transform":"translateX(100%)"},to:{"-webkit-transform":"translateX(0%)"}}],fx:n.config.fxFn,duration:n.config.fxDuration,then:function(){}}):t.motion({effects:[{el:n.prevItem,from:{"-webkit-transform":"translateX(0%)"},to:{"-webkit-transform":"translateX(100%)"}},{el:n.currentItem,from:{"-webkit-transform":"translateX(-100%)"},to:{"-webkit-transform":"translateX(0%)"}}],fx:n.config.fxFn,duration:n.config.fxDuration,then:function(){}})},scroll:function(e){var t=this,n;e?n=t.items.eq(t.index==t.length-1?t.config.circle?0:t.index:t.index+1):n=t.items.eq(t.index==0?t.config.circle?t.length-1:t.index:t.index-1),n&&n.length&&n!=t.currentItem&&(t.config.currentItemCls&&(n.addClass(t.config.currentItemCls),t.currentItem.removeClass(t.config.currentItemCls)),t.prevItem=t.currentItem,t.currentItem=n,t.index=n.index(),t.move(e),t.switchIndex())},autoScroll:function(t){var n=this,r={direction:"right",interval:3e3},t=n.config.autoScroll=e.mix(r,t);clearInterval(n.timerInterval),n.timerInterval=setInterval(function(){try{t.direction=="right"||t.direction=="1"||t.direction==1?n.scroll(!0):n.scroll(!1)}catch(e){throw Logger.error("FILENAME:widget/banner","LINENO:321",e),Logger.send(),e}},t.interval)},pauseAutoScroll:function(){var e=this;clearInterval(e.timerInterval)},removeAutoScroll:function(){var e=this;clearInterval(e.timerInterval),e.config.autoScroll=null}},r}),define("widget/mobileDetect",[],function(){var e=MD=function(e,t){var n="",r,i,s={iPhone:"(iPhone.*Mobile|iPod|iTunes)",BlackBerry:"BlackBerry|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6425|001HT|Inspire 4G",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35",Motorola:"Motorola|\bDroid\b.*Build|DROIDX|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT909|XT910|XT912|XT928|RAZR",Samsung:"Samsung|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9300 |GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-P6810|GT-P7100|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100",Sony:"E10i|SonyEricsson|SonyEricssonLT15iv",Asus:"Asus.*Galaxy",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",GenericPhone:"PDA;|PPC;|SAGEM|mmp|pocket|psp|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|wap|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser|LG-P500"},o={BlackBerryTablet:"PlayBook|RIM Tablet",iPad:"iPad|iPad.*Mobile",NexusTablet:"^.*Android.*Nexus(?:(?!Mobile).)*$",Kindle:"Kindle|Silk.*Accelerated",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|GT-P1000|GT-P1010|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P1000|GT-P3100|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7300|GT-P7320|GT-P7500|GT-P7510|GT-P7511",HTCtablet:"HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",AsusTablet:"Transformer|TF101",NookTablet:"Android.*Nook|NookColor|nook browser|BNTV250A|LogicPD Zoom2",AcerTablet:"Android.*\b(A100|A101|A200|A500|A501|A510|W500|W500P|W501|W501P)\b",YarvikTablet:"Android.*(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468)",MedionTablet:"Android.*\bOYO\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT",ArchosTablet:"Android.*ARCHOS|101G9|80G9",AinolTablet:"NOVO7|Novo7Aurora|Novo7Basic|NOVO7PALADIN",SonyTablet:"Sony Tablet|Sony Tablet S",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)",GenericTablet:"Tablet(?!.*PC)|ViewPad7|LG-V909|MID7015|BNTV250A|LogicPD Zoom2|\bA7EB\b|CatNova8|A1_07|CT704|CT1002|\bM721\b|hp-tablet"},u={AndroidOS:"Android",BlackBerryOS:"blackberry|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\bS60\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone OS|XBLWP7|ZuneWP7",iOS:"iphone|ipod|ipad|iPhone|iPod|iPad|CPU OS 5_|CPU OS 6_",FlashLiteOS:"",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/MIDP|Java/",webOS:"webOS|hpwOS",badaOS:"\bBada\b",BREWOS:"BREW"},a={AndroidMobile:"Android.*Mobile",Chrome:"\bCrMo\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\bDolfin\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera",Skyfire:"Skyfire",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile",Midori:"midori",Tizen:"Tizen",UCBrowser:"UC.*Browser|UCWEB",DiigoBrowser:"DiigoBrowser",GenericBrowser:"NokiaBrowser|OviBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision",QQBrowser:"MQQBrowser"},f={WebKit:"(webkit)[ /]([w.]+)",Bot:"Googlebot|DoCoMo|YandexBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|facebookexternalhit",MobileBot:"Googlebot-Mobile|DoCoMo|YahooSeeker/M1A1-R2D2"},l="([w._]+)",c={Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:"Chrome/[VER]",CriOS:"CriOS/[VER]",Dolfin:"Dolfin/[VER]",Firefox:"Firefox/[VER]",Fennec:"Fennec/[VER]",IEMobile:["IEMobile/[VER];","IEMobile [VER]"],MSIE:"MSIE [VER];",NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:"Version/[VER]","Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",Safari:"Version/[VER]",Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Android:"Android [VER]",BlackBerry:["BlackBerry[w]+/[VER]","BlackBerry.*Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":"Windows Phone OS [VER]","Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},h=function(){for(var e in a)if(n.search(a[e])>-1)return e;return"not-found"},p=function(){for(var e in u)if(n.search(u[e])>-1)return e;return"not-found"},d=function(){for(var e in s)if(n.search(s[e])>-1)return e;return"not-found"},v=function(){for(var e in o)if(n.search(o[e])>-1)return e;return"not-found"},m=function(){return n.search(s.iPhone)>-1},g=function(){return n.search(o.iPad)>-1},y=function(){return n.search(u.AndroidOS)>-1},b=function(){return n.search(a.AndroidMobile)>-1},w=function(){return n.search(u.iOS)>-1},E=function(){for(var e in s)if(n.search(s[e])>-1)return!0;return!1},S=function(){for(var e in o)if(n.search(o[e])>-1)return!0;return!1},x=function(){return n.search(a.Chrome)>-1},T=function(){return n.search(a.Safari)>-1},N=function(){return w()&&(g()||m())};return{getUserAgent:function(){return n},getInnerWidth:function(){return r},getInnerHeight:function(){return i},getBrowser:h,getOS:p,getMobileDeviceName:d,getTabletDeviceName:v,isDevice:function(){return E()||S()||y()||w()},isIPhone:m,isIPad:g,isIOS:w,isAndroid:y,isAndroidMobile:b,isMobileDevice:function(){return E()||b()},isTabletDevice:S,isBrowserChrome:x,isBrowserSafari:T,isIDevice:N,isAppleProduct:N,initInnerHeight:e.innerHeight,initInnerWidth:e.innerWidth,init:function(){navigator&&navigator.userAgent&&(n=navigator.userAgent)}}}(window);return MD.init(),e}),define("widget/pingV2",["common","login/login","config/url","widget/util","widget/mobileDetect"],function(e,t,n,r,i){function x(){var e=parseInt(N()),t={1:"1990",2:"1991",0:"1992"};return e in t?t[e]:""}function T(){var e=i.initInnerHeight,t=i.initInnerWidth;return t+"*"+e+""}function N(){return e.url.getParam("app")?e.url.getParam("app"):window.touch?1:e.cookie.get("version")&&(document.userAgent.indexOf("iPhone")>0||document.userAgent.indexOf("iPad")>0||document.userAgent.indexOf("iTouch")>0||document.userAgent.indexOf("iPod")>0)?2:0}var s={},o="",u={type:1,uid:0,pageid:0,plevel:0,tag:"",url:"",refer:"",referid:0,guid:0,whid:1992,resolution:"",color:"",pid:0,ext:"",y_track:""},a=1e4,f="y_track",l="y_guid",c="y_rfid",h="y_cl",p="y_source",d={14:"baidu.com",24:"google.com",34:"google.com.hk",44:"soso.com",54:"sogou.com",64:"youdao.com",74:"bing.com",84:"hao.qq.com",94:"hao123.com",104:"2345.com",114:"114la.com",124:"tao123.com",134:"hao.360.cn",144:"123.sogou.com",154:"265.com",164:"etao.com",174:"so.360.cn"},v="t_ytag",m="t_guid",g="t_ref",y="t_ref_url",b="/t/",w={index:{id:1e3,level:1},tuan:{id:170,level:2},morning:{id:120,level:2},recharge:{id:23800,level:2},login:{id:13500,level:3},event_onepage:{id:"016",level:2},event_qiang:{id:"017",level:2},event_yinliu:{id:"027",level:2},event_hudong:{id:"037",level:2},event_zixun:{id:"047",level:2},order:{id:250,level:2},mainSearch:{id:103620100,level:2},orderDetail:{id:2500,level:3},order_feedback:{id:2600,level:3},detail:{id:4e4,level:3},goodspic:{id:13700,level:3},"category/":{id:13400,level:3},cart:{id:220,level:3},"search/":{id:5e4,level:2},list:{id:210,level:3},"my/":{id:11649770,level:3},"my/my_order.html":{id:11594060,level:3},"my/my_fav.html":{id:11703220,level:3},"my/my_quan.html":{id:11708430,level:3},"my/my_address.html":{id:11709e3,level:3},"my/my_addressadd.html":{id:11709001,level:3},"my/my_addresseditor.html":{id:11709002,level:3},"category/":{id:11709002,level:3},wxwo:{id:8888,level:3},"wxwo/main_detai.html":{id:88881,level:3},"wxwo/main_combotypeinfo.html":{id:88882,level:3},"wxwo/main_choose.html":{id:88883,level:3},faxian:{id:33800,level:2},faxian_article:{id:33801,level:3}},E,S;return s.init=function(n,i){t.ifLogin()&&(u.uid=e.cookie.get("uid")),x()&&(u.whid=x()),T()&&(u.resolution=T()),w[n.name]?(n.pageid=w[n.name].id,n.level=w[n.name].level):alert(n.name+" 没有找到相应页面信息"),n&&n.pageid&&n.pageid!=""&&n.pageid!=0&&(u.pageid=n.pageid,u.plevel=n.level,u.url=encodeURIComponent(e.url.getProtocol()+"://"+e.url.getHost()+e.url.getPathname())),u.pid=parseInt(e.url.getParam("pid")||0),u.pid!=0&&u.pid!=undefined&&u.pid!=""&&(u.pageid=parseInt(u.pid)*10+1);if(e.cookie.get(g)!=""&&typeof e.cookie.get(g)!="undefined"){e.log(e.cookie.get(g));try{u.referid=w[e.cookie.get(g)].id,u.refer=e.cookie.get(y)}catch(o){u.referid="",u.refer=""}}else if(document.referrer&&document.referrer!=""){var a=e.url.parse(document.referrer);u.referid=s.getPageInfo(document.referrer).id,u.refer=encodeURIComponent(a.Protocol+"://"+a.Host+a.Pathname)}n&&n.name&&n.name!=""&&n.name!=0&&(e.cookie.add(g,n.name),e.cookie.add(y,n.refer));if(e.store.isPrivateBrowse()){var f=e.cookie.get(m)||0;f==0?(f=r.newGuid(),e.log(f,"GUID"),e.cookie.add(m,f,"/",31536e3,".51buy.com"),u.guid=f):u.guid=e.cookie.get(m)}else{var f=e.store.get(m)||0;f==0?(f=r.newGuid(),e.log(f,"GUID"),e.store.set(m,f),u.guid=f):u.guid=e.store.get(m)}n&&n.src&&n.src!=""&&n.src!=0?u.color=n.src:e.url.getParam("src")&&(u.color=encodeURIComponent(e.url.getParam("src"))),e.log(u,"生成的PingData"),e.url.getParam("YTAG")||e.url.getParam("ytag")?u.tag=e.url.getParam("YTAG")||e.url.getParam("ytag")||"":e.cookie.get(v)?u.tag=e.cookie.get(v):u.tag=u.plevel+"."+u.pageid+"00000",u.type=1,s.ytrack(),s.send("load"),s.flushSend(),i&&i()},s.click=function(t,n){e.log("绑定点击事件"),e(".J_ytag").live("click",function(){if(e(this).attr("data-type")==2)e.log("click 点击流");else{e.log("pingData.ytag:",u.ytag),typeof u.ytag=="undefined"&&(u.ytag="");var t=u.plevel+"."+u.pageid+e(this).attr("ytag");e.cookie.add(v,t,"/","3600",".51buy.com")}s.ytagClick(e(this).attr("ytag"))}),e(".T_ytag").live("tap",function(){e(this).attr("data-type")==2?e.log("click 点击流"):(e.log("pingData.ytag:",u.ytag),typeof u.ytag=="undefined"&&(u.ytag=""),e.cookie.add(v,u.ytag,"/","3600",".51buy.com")),s.ytagClick(e(this).attr("ytag"))}),e("select.select_J_ytag").live("change",function(){var t=e(this).find("option:selected")[0].attributes.ytag.value,n=e(this).find("option:selected")[0].attributes["data-type"].value;n==2?e.log("click 点击流"):(e.log("pingData.ytag:",u.ytag),typeof u.ytag=="undefined"&&(u.ytag=""),e.cookie.add(v,u.ytag,"/","3600",".51buy.com")),s.ytagClick(t)})},s.ytagClick=function(t){var t=t||"";e.log("ytagClick ytag:",t),t!=""&&(u.tag=u.plevel+"."+u.pageid+t,u.type=2,s.send("click"))},s.send=function(t,r){r&&(u.ytag=u.plevel+"."+u.pageid+r),e(u,"上报数据");var i=[];for(var s in u)i.push(s+"="+u[s]);var i=i.join("&"),a=n.rule.ping.url+i;window._track?o=window._track:(o=new XMLHttpRequest,window._track=o);try{t=="click"&&(e.store.set("t_ping_data",i),o.addEventListener("readystatechange",function(){o.readyState==1&&(e.log("success"),e.store.del("t_ping_data"))})),o.open("get",a),e.log("send"),o.send()}catch(f){}},s.flushSend=function(){var t=e.store.get("t_ping_data")||"";if(t!=""){var r=new Image(1,1);r.src="http://stat."+n.mainDomain+"/stat.fcg?"+t,e.store.del("t_ping_data")}},s.getPageInfo=function(t){e.log(t,"ref URL");var n=e.url.parse(t).Pathname,r=e.url.parse(t).Host;for(k in d){e.log(r,"Host"),e.log(d[k],"Value");if(document.referrer.indexOf(d[k])>0)return e.log(k,"return 1"),{id:k,level:0,url:t}}b=b.replace("index.html","");if(w[n.replace(b,"")]){w[n.replace(b,"")].url=t;var i=w[n.replace(b,"")];return b=="detail/",i}return{id:0,level:0,url:t}},s.ytrack=function(){var t=u.tag;if(!t)return;var r=e.cookie.get(f),i=[],s=0;r=r.split("."),r.length!=2&&(r=["0-0-0-0",0]),s=r[1],i=r[0].split("-"),i.length!=4&&(i=[0,0,0,0]);var o=t.split(".",2);o.length!=2&&(o=[0,0]),parseInt(o[0])==0&&o[1]!=0&&e.cookie.add(p,o[1],"/",604800,n.mainDomain);var a=e.cookie.get(p);a&&(i[0]=a);if(o[1]!=0&&e.inArray(o[0]-0,[0,1,2,3])>=0){for(var l=o[0];l<=3;l++)i[l]=0;i[o[0]]=o[1],s=o[0]}i=i.join("-")+"."+s,u.y_track=i,e.cookie.add(f,i,"/",0,n.mainDomain)},s.ytag=function(t){e("a").each(function(t){var n=e(this).attr("href"),r=e(this).attr("ytag")||"";if(r!=""&&!(n==""||n=="#"||n.indexOf("javascript")>=0)){var i=n+"&YTAG="+u.plevel+"."+u.pageid+r;e(this).attr("href",i)}})},{init:function(e){s.init(e)},click:function(e,t){s.click(e,t)},pageList:w}}),define("widget/countdown",["common"],function(e){(function(e,t){try{var n=function(){var e=function(){this.init.apply(this,arguments)};return e.fn=e.prototype,e.fn.init=function(){},e},r=new n;r.fn.init=function(e){this.interval=parseInt(e.interval,10)>0?parseInt(e.interval,10):1e3,this.timer=0,this._getStandardTime(e.standardTime),this._getNowTime(e.nowTime),this._getDiffTime(e.standardTime),this._getTargetTime(e.targetTime),this.intervalCallback=e.intervalCallback,this.endCallback=e.endCallback},r.fn.start=function(){var e=this;e.timer===0&&(e._countdown(),e.timer=setInterval(function(){e._countdown()},e.interval))},r.fn.stop=function(){var e=this;clearInterval(e.timer),e.timer=0},r.fn.end=function(){var e=this;e.stop(),typeof e.endCallback=="function"&&e.endCallback()},r.fn._getTargetTime=function(e){e instanceof Date?this.targetTime=e.getTime():isNaN(e)?this.targetTime=(new Date(e)).getTime():this.targetTime=e;if(!isNaN(this.targetTime)){var n=this.standardTime!==t?this.standardTime:(new Date).getTime();this.targetTime<n&&Logger.error("FILENAME:widget/countdown","LINENO:61","Countdown : 限时时间到")}else Logger.error("FILENAME:widget/countdown","LINENO:64","Countdown : 结束时间语法错")},r.fn._getStandardTime=function(e){e!==t&&(e instanceof Date?this.standardTime=e.getTime():isNaN(e)?i.isValidDate(e)&&(this.standardTime=(new Date(e)).getTime()):this.standardTime=e,isNaN(this.standardTime)&&Logger.error("FILENAME:widget/countdown","LINENO:78","Countdown : 标准时间语法错"))},r.fn._getNowTime=function(e){isNaN(e)?e?Logger.error("FILENAME:widget/countdown","LINENO:89","Countdown: 当前时间语法错"):this.nowTime=(new Date).getTime():this.nowTime=e},r.fn._getDiffTime=function(){this.diffTime=0;if(this.standardTime!==t||this.nowTime!==t){var e=this.standardTime?this.standardTime:this.nowTime;this.diffTime=e-(new Date).getTime(),this.diffTime=Math.floor(this.diffTime/1e3)*1e3}},r.fn._countdown=function(){var e=this,t=(new Date).getTime()+e.diffTime;if(t<e.targetTime){var n=e.targetTime-t,r=i.getLeftTime(n),s=i.getStrLeftTime(r);typeof e.intervalCallback=="function"&&e.intervalCallback(s,r)}else e.end()};var i={getStrLeftTime:function(e){var t=e.h<10?["0",""+e.h]:JSON.stringify(e.h).split(""),n=e.m<10?["0",""+e.m]:JSON.stringify(e.m).split(""),r=e.s<10?["0",""+e.s]:JSON.stringify(e.s).split("");return{h:t,m:n,s:r}},getLeftTime:function(e){try{var t=864e5,n=e/t,r=Math.floor(n),i=(n-r)*24,s=Math.floor(i),o=(i-s)*60,u=Math.floor(o),a=Math.floor((o-u)*60);return{d:r,h:s,m:u,s:a}}catch(f){throw Logger.error("FILENAME:widget/countdown","LINENO:151",f),f}},isValidDate:function(e){return Object.prototype.toString.call(e)!=="[object Date]"?!1:!isNaN(e.getTime())}};e.Countdown=r}catch(s){throw Logger.error("FILENAME:widget/countdown","LINENO:165",s),s}})(e)}),define("widget/hashChangeEventTool",["common"],function(e){function s(e,n){t[e]={fn:n}}function o(e,n){t[e]&&(t[e].data=n)}function u(e){return t[e]?t[e].data:undefined}function a(e){delete t[e]}function f(n,r){if(t[n]){var i=t[n].fn;typeof i=="function"&&i(e.mix(t[n].data,r))}}function l(t){var n=decodeURIComponent(t.indexOf("#")==0?t.substring(1):t),r,i;return n.indexOf("(")>0&&n.indexOf(")")>0&&(r=n.match(/\(([^\(\)]+)\)/)[1],n=n.substring(0,n.indexOf("(")),i=e.parseJSON(r)),{key:n,data:i}}function c(r){var i=l(r),s=i.key,o=i.data;if(!t[s])return;n=location.hash.indexOf("#")==0?location.hash.substring(1):location.hash,e.url.setHash(encodeURIComponent(d(r)))}function h(){return n}function p(){return n==location.hash.substring(1)?!1:!0}function d(t){var n=l(t||location.hash);return v(n.key,e.mix(n.data,function(){var e={};return e[i]=+(new Date),e}()))}function v(e,t){return e+"("+JSON.stringify(t)+")"}var t={},n,r="DEFAULT",i="_";return window.addEventListener("hashchange",function(){if(location.hash)var n=location.hash;else var n="";var i=l(n),s=i.key,o=i.data;s=s||r,e.log(t,"显示所有的hashChangeEvent已经注册的");if(t[s]){var u=t[s].fn;typeof u=="function"&&u(e.mix(t[s].data,o))}},!1),{DEFAULT:r,regist:s,setData:o,getData:u,cancel:a,excute:f,changeHash:c,getLastHash:h,isHashChange:p,parse:l,refreshTime:d,stringify:v}}),define("widget/appdownad",["common","config/url","widget/app"],function(e,t,n){function u(t){function c(t,n){if(!t)return!1;var r=a(),s="",o="",u="",f="",l=t.data.POS_1;for(i in l){s=l[i].EXTDATA.list[0].remarks;if(r===parseInt(s)){f=l[i].EXTDATA.list[0].picUrl,u=l[i].EXTDATA.list[0].url,o=l[i].EXTDATA.list[0].title;break}}if(!f&&!u)return!1;e(".appdownad_container_"+n).show();var c="appdownad_url_"+n,h="appdownad_img_"+n,p="appdownad_title_"+n;e("."+c).click(function(){if(!u)return!1;location.href=u}),f&&e("."+h).attr("src",f),o&&e("."+p).html(o)}var r=n.getAppID();if(typeof t=="undefined"||!t)if(r>0)return!1;var s,u,f=!1,l=e(".J_appdownad");l.length>0&&e.each(l,function(t,n){e(n).attr("data-ignore")||(s=e(n).attr("data-id"),u="appdownad_container_"+s,f=e(n).hasClass(u),f||e(n).addClass(u),o.ad(s,c))})}function a(){var e=navigator.userAgent.toLocaleLowerCase();return e.indexOf("iphone")>-1||e.indexOf("ipad")>-1?2:e.indexOf("android")>-1?1:0}function f(e){if(!e)return-1;var t=e.split("--");return t.length>=2?t[0]?t[0]:-1:-1}var r={ad:{url:"http://s3.smart.yixun.com/w/tf/gettfx?callback=?",get:{tfid:"?",type:"?"}}},s={type:"jsonp",tfid:""},o={};return o.ad=function(t,n){var i={};t&&(s.tfid=t),e.getJSON(e.makeUrl(r.ad,s).url,function(e){n(e,t)})},{ad:o.ad,init:u,getappid:a,splitRule:f}}),define("widget/crosscookie",["config/url"],function(e){function r(){return Date.now().toString()+(t++).toString()}function o(t){if(!document.getElementById("iframe_setcookie")){var r=e.baseUrl+"common/setcookie.html?v="+Date.now()+(location.hash=="#debugcookie"?"#debugcookie":"");e.baseUrl.indexOf("51buy.com")<0?r=r.replace("yixun.com","51buy.com"):r=r.replace("51buy.com","yixun.com"),window.addEventListener("message",function(e){if("result"in e.data&&"cmd"in e.data&&e.data.cmd=="crosscookie")typeof s[e.data.id].callback=="function"&&(s[e.data.id].callback(),delete s[e.data.id]);else if("result"in e.data&&"cmd"in e.data&&e.data.cmd=="crosscookieReady"){n=!0,t&&t();while(i.length)i.shift()}},!1);var o=document.createElement("iframe");o.setAttribute("src",r),o.style.height="0px",o.style.width="0px",o.setAttribute("id","iframe_setcookie"),o.style.display="none",document.body.appendChild(o),Logger.debug("FILENAME:widget/crosscookie","LINENO:48","create iframe")}else typeof t=="function"&&(n?t&&t():i.push(t))}function u(t,n){o(function(){if(typeof t=="string")e.baseUrl.indexOf("51buy.com")<0?t=t.replace(/domain=\.yixun.com/,"domain=.51buy.com"):t=t.replace(/domain=\.?51buy.com/,"domain=.yixun.com");else for(var i=0;i<t.length;i++)e.baseUrl.indexOf("51buy.com")<0?t[i]=t[i].replace(/domain=\.?yixun.com/,"domain=.51buy.com"):t[i]=t[i].replace(/domain=\.?51buy.com/,"domain=.yixun.com");var o=r(),u="crosscookie";typeof t!="string"&&(u="crosscookieBatch"),s[o]={cmd:u,data:t,id:o,callback:n},document.getElementById("iframe_setcookie").contentWindow.postMessage({cmd:u,data:t,id:o},"*")})}function a(e,t,n,r,i){var s=e+"="+escape(t)+"; path="+(n||"/")+(i?"; domain="+i:"");if(r>0){var o=new Date;o.setTime(o.getTime()+r*1e3),s+="; expires="+o.toGMTString()}return document.cookie=s,s}function f(e,t,n,r){arguments.length==2&&(n=t,t="/");var i=e+"=;path="+t+";"+(n?"domain="+n+";":"")+"expires=Thu, 01-Jan-70 00:00:01 GMT";return document.cookie=i,i}var t=0,n=!1,i=[],s={};return{init:o,get:function(e){var t=new RegExp("(^|;|\\s+)"+e+"=([^;]*)(;|$)"),n=document.cookie.match(t);return n?unescape(n[2]):""},add:function(e,t,n,r,i,s){u(a(e,t,n,r,i),s)},batchAdd:function(e,t){var n=[];e.forEach(function(e){n.push(a.apply(this,e))}),u(n,t)},del:function(e,t,n,r){u(f(e,t,n,r),r)},batchDel:function(e,t){var n=[];e.forEach(function(e){n.push(f.apply(this,e))}),u(n,t)}}}),require(["common","widget/fix","login/login","footer/footer","index/index","detail/detail","widget/tplrender","widget/util","widget/area","widget/select","widget/message","widget/orientation","config/url","widget/fx","widget/touch","widget/fx","widget/banner","widget/pingV2","widget/countdown","widget/hashChangeEventTool","widget/appdownad","widget/crosscookie","widget/app"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,t,p,d,v,t,m,g,y,b){try{var w=!0;y.init();var E=b.getAppID();E||g.ad(200081,S);function S(n){var r=n.data,i=n.tfId,s=_tmpData="",o="",u="",a="";if(typeof r!=t)for(var f in r){o="appdownad_url_",u="appdownad_img_",a="appdownad_title_",s=f.replace("_","").toLowerCase(),o+=s+"_"+i,u+=s+"_"+i,a+=s+"_"+i,_tmpData=r[f];for(var l in _tmpData){_chiData=_tmpData[l].EXTDATA.list;for(var c in _chiData){e("."+u).attr("src",_chiData[c].picUrl);if(s=="pos1")e("."+a).html(_chiData[c].title),e("."+o).click(function(){location.href=_chiData[c].url});else if(s!="pos2")if(s=="pos3"){var h=g.splitRule(_chiData[c].title),p=g.getappid();isSetUrl=!1,p==2?h=="i"&&(e("."+a).html(_chiData[c].title.substring(3)),isSetUrl=!0):p==1?h=="a"&&(e("."+a).html(_chiData[c].title.substring(3)),isSetUrl=!0):h=="t"&&(e("."+a).html(_chiData[c].title.substring(3)),isSetUrl=!0),isSetUrl&&e("."+o).attr("href",_chiData[c].url)}else s=="pos4"}}}e("#showClientId").click(function(){e(".mod_download").show()}),e.cookie.get("isShowAppDownAd")||(e.url.getParam("src")!="qqbrowser"&&e(".mod_download").show(),e.cookie.add("isShowAppDownAd",1,"/",86400)),e("#closeId").click(function(){e(".mod_download").hide()}),e("#closeAId").click(function(){e(".mod_download").hide()})}var x=e.cookie.get("wsid"),T=e.cookie.get("prid"),N;x==null||T==null||x==""||x=="0"||T==""||T=="0"?(window.errerTimeout=setTimeout(function(){x="1",T="2626_2621",C()},1e4),e.getScript("http://base.yixun.com/w/loc/getloc?noSetCookie=0&callback=_callbackDefaultPrid",function(e){clearTimeout(window.errerTimeout),x=e.data.wsid,T=e.data.icsonDistrictId+"_"+e.data.icsonProvinceId,C()})):C();function C(){function g(e,t,n){return{ytag:e,less:t,product_id:n.product_id,img:u.getPic200Url(n.product_char_id,0),show_price:u.price(parseFloat(n.show_price)),promotion_word:n.promotion_word?n.promotion_word:n.name}}function b(){e.cookie.get("isShowAppDownAd")}y.add("wsid",x,"/",31536e3,h.mainDomain),y.add("prid",T,"/",31536e3,h.mainDomain),N=a.getAddress(T.split("_")[0]).prov||"",s.getDispatches(function(){try{var t=s.getBizObj(),n=t.dispatches,r=e.url.getParam("channelId")||0;e.log(n,"地区列表"),o.stepVariable().selectArea=71e3;var i="";for(var u=0;u<n.length;u++)N.indexOf(n[u].name)>=0&&(n[u].selected=" selected = selected ",e.log("dispatches[i]:",n[u]),i=n[u]);var l={};l.dispatches=n,o.tpl(e(".J_template_dispatches"),l,function(t){t.left==0&&(e("select option:selected").text().length==3&&e(".area").addClass("area_threeletter"),e("#dispatches").bind("change",function(){var t=e("#dispatches option").not(function(){return!this.selected}).attr("siteid"),n=e(this).val();N=f.getSelectedText(document.querySelector("#dispatches")),a.getDefaultDistrict(N,function(e){e.area&&e.prov&&y.add("prid",e.area_key+"_"+e.prov_key,"/",31536e3,h.mainDomain),y.add("wsid",e.siteId,"/",31536e3,h.mainDomain),location.reload()})}))})}catch(c){Logger.error("FILENAME:index/main","LINENO:202","商详绘制省市列表失败:"+c),Logger.send()}}),i.init(function(t){e.log("init data:",t);try{n.ifLogin()&&(t.iflogin=1),e.log(t,"初始化数据"),o.tpl(e(".J_template_init"),{init:t},function(n){if(n.left==0){var r=0,i=t.banner.length;e(".J_index_ctrl span").eq(0).addClass("current"),e("#J_index_slide").find("li").css({"-webkit-transform":"translateX(100%)"}),e("#J_index_slide").find("li").eq(0).css({"-webkit-transform":"translateX(0%)"}),new d({container:e(".mod_slide"),itemContainer:e("#J_index_slide"),indexContainer:e(".J_index_ctrl"),currentItemCls:"current",currentIndexCls:"current"}),e(".mod_cate")[0].onclick=function(e){var t=window.event||e,n=t.srcElement||t.target;if(n.nodeName.toUpperCase()=="A"){t.preventDefault?t.preventDefault():t.returnValue=!1;var r=typeof n.textContent=="string"?n.textContent:n.innerText;location.href=n.getAttribute("href")+"&cateword="+r}return!1}}}),u.hideTips(),o.getRemoteTpl({wrapperId:"J_searchWrapper",wrapperCls:"J_pageBox",url:e.url.getDomainUrl()+"/t/search/index.html"},function(){e("#J_searchWrapper")[0].style.visibility="hidden",require(["search/main_search"]),e("#J_searchWrapper").hide(),e(".J_remoteSearch").focus(function(t){this.blur(),e.url.setHash("search"),t.stopPropagation(),t.preventDefault()})})}catch(r){Logger.error("FILENAME:index/main","LINENO:388","首页初始化失败:"+r),Logger.send()}},function(e){message.error("首页初始化失败，重新刷新吗？")}),i.qiang(function(t){try{var n=[];e.log("__data:",t),e.log("data.now - data.end:",t.now-t.end);var r=new e.Countdown({nowTime:t.now*1e3,targetTime:t.end*1e3,intervalCallback:function(t,n){e(".h1").html(t.h[0]),e(".h2").html(t.h[1]),e(".m1").html(t.m[0]),e(".m2").html(t.m[1]),e(".s1").html(t.s[0]),e(".s2").html(t.s[1])},endCallback:function(){}});r.start();for(var i=0;i<t.products.length;i++){n[i]=t.products[i],(i+1)%2==1?n[i].list_start='<div class="item">':n[i].list_end="</div>",e.log("res[i].progress:",n[i].progress),n[i].sale_type==1&&parseInt(n[i].progress)<50&&(n[i].less="库存紧张"),n[i].sale_type!=1&&(n[i].less="已抢空"),n[i].img=u.getPic200Url(n[i].product_char_id,0),n[i].show_price=u.price(parseFloat(n[i].show_price));if(i>4)break}e.log(n,"抢购数据"),o.tpl(e(".J_template_qiang"),{products:n},function(e){e.left==0}),u.hideTips()}catch(s){Logger.error("FILENAME:index/main","LINENO:454","抢购信息初始化失败:"+s),Logger.send()}},function(){e(".mod_quickbuy").hide()}),i.nextqiang(function(t){try{e.log(t,"抢购预告");var n=[];for(var r=0;r<t.length;r++){n[r]=t[r],(r+1)%2==1?n[r].list_start='<div class="item">':n[r].list_end="</div>",n[r].img=u.getPic200Url(n[r].product_char_id,0),n[r].show_price=u.price(parseFloat(n[r].show_price));if(r>4)break}e.log(n,"抢购数据"),o.tpl(e(".J_template_nextqiang"),{products:n},function(t){t.left==0&&(e(".mask").css("width",e(".J_nextqiang_content").width()+"px"),c.watch(function(){e(".mask").css("width",e(".J_nextqiang_content").width()+"px")},function(){e(".mask").css("width",e(".J_nextqiang_content").width()+"px")}))}),e(".J_nextqiang_title").click(function(){e(this).hasClass("announce_hd_open")?(e(this).removeClass("announce_hd_open").addClass("announce_hd_close"),p.upglide({el:e(".J_nextqiang_content"),then:function(){e(".J_nextqiang_content").hide()}}),e(this).find("span").html("点击查看")):(e(this).removeClass("announce_hd_close").addClass("announce_hd_open"),e(".J_nextqiang_content").show(),e(".J_nextqiang_content").css({height:"auto"}),p.glide({el:e(".J_nextqiang_content")}),e(this).find("span").html("点击收起"))}),u.hideTips()}catch(i){Logger.error("FILENAME:index/main","LINENO:533","明日抢购失败:"+i),Logger.send()}},function(){e(".mod_announce").hide()});try{var t=e.store.get("t_products_history")||[];t!=""&&(t=JSON.parse(t).join(","),i.getProducts(t,function(t){t.length>0&&(e(".mod_history").show(),o.tpl(e(".J_template_history"),{visitHistory:t}))},function(){message.error("获取商品信息失败，重新刷新吗？")}))}catch(l){Logger.error("FILENAME:index/main","LINENO:566","历史记录失败:"+l),Logger.send()}e.url.replaceHash(""),m.regist("search",function(t){e(".y_index").hide(),document.body.scrollTop=0,e("#J_searchWrapper").show(),e("#J_searchWrapper")[0].style.visibility="visible",w&&(w=!1)}),m.regist(m.DEFAULT,function(t){e("#J_searchWrapper").hide(),document.body.scrollTop=0,e(".y_index").show()}),o.stepVariable().xianshi=2e4,o.stepVariable().yugao=3e4,o.stepVariable().fenlei=5e4,v.init({name:"index",refer:encodeURIComponent(e.url.getProtocol()+"://"+e.url.getHost()+e.url.getPathname())}),v.click(),r.init(b),r.nav()}}catch(k){throw Logger.error("FILENAME:index/main","LINENO:641",k),k}}),define("index/main",function(){});/*  |xGv00|276fccd705779dba4d7dc0b4c653446d */